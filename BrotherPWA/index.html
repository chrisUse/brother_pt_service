<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brother PT Label Generator</title>
    <meta name="description" content="Professioneller Label-Generator fÃ¼r Elektriker und IT-Techniker">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1976d2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Label Generator">
    
    <!-- Icons -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <h1>ğŸ·ï¸ Brother PT Label Generator</h1>
                <div class="status" id="status">
                    <span class="status-indicator" id="statusIndicator">âš«</span>
                    <span id="statusText">Verbinde...</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <!-- Label Type Selector -->
                <section class="label-selector">
                    <h2>Label-Typ auswÃ¤hlen</h2>
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="text">ğŸ“„ Text</button>
                        <button class="tab-btn" data-tab="cable">âš¡ Kabel</button>
                        <button class="tab-btn" data-tab="device">ğŸ’» GerÃ¤t</button>
                        <button class="tab-btn" data-tab="warning">âš ï¸ Warnung</button>
                        <button class="tab-btn" data-tab="batch">ğŸ“¦ Batch</button>
                        <button class="tab-btn" data-tab="custom">ğŸ¨ Custom</button>
                    </div>
                </section>

                <!-- Forms Container -->
                <section class="forms-container">
                    
                    <!-- Text Label Form -->
                    <div class="form-panel active" id="textForm">
                        <h3>Einfaches Text-Label</h3>
                        <form class="label-form">
                            <div class="form-group">
                                <label for="textContent">Text:</label>
                                <input type="text" id="textContent" placeholder="z.B. Server Rack A" maxlength="50" required>
                            </div>
                            <div class="form-group">
                                <label for="textFontSize">SchriftgrÃ¶ÃŸe:</label>
                                <input type="range" id="textFontSize" min="8" max="24" value="14">
                                <span class="range-value" id="textFontSizeValue">14px</span>
                            </div>
                            <button type="submit" class="btn btn-primary">ğŸ–¨ï¸ Label drucken</button>
                        </form>
                    </div>

                    <!-- Cable Label Form -->
                    <div class="form-panel" id="cableForm">
                        <h3>Kabel-Label fÃ¼r Elektriker</h3>
                        <form class="label-form">
                            <div class="form-group">
                                <label for="cableType">Kabel-Typ:</label>
                                <input type="text" id="cableType" placeholder="z.B. NYM-J 3x1.5" required>
                            </div>
                            <div class="form-group">
                                <label for="cableVoltage">Spannung:</label>
                                <input type="text" id="cableVoltage" placeholder="z.B. 230V">
                            </div>
                            <div class="form-group">
                                <label for="cableDestination">Ziel:</label>
                                <input type="text" id="cableDestination" placeholder="z.B. BÃ¼ro 123">
                            </div>
                            <div class="form-group">
                                <label for="cableColorCode">Farbkodierung:</label>
                                <input type="text" id="cableColorCode" placeholder="z.B. L1-Braun, N-Blau, PE-GrÃ¼n/Gelb">
                            </div>
                            <button type="submit" class="btn btn-primary">ğŸ–¨ï¸ Kabel-Label drucken</button>
                        </form>
                    </div>

                    <!-- Device Label Form -->
                    <div class="form-panel" id="deviceForm">
                        <h3>GerÃ¤te-Label fÃ¼r IT-Techniker</h3>
                        <form class="label-form">
                            <div class="form-group">
                                <label for="deviceName">GerÃ¤tename:</label>
                                <input type="text" id="deviceName" placeholder="z.B. Switch-24P-01" required>
                            </div>
                            <div class="form-group">
                                <label for="deviceIP">IP-Adresse:</label>
                                <input type="text" id="deviceIP" placeholder="z.B. 192.168.1.100" pattern="^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$">
                            </div>
                            <div class="form-group">
                                <label for="deviceMAC">MAC-Adresse:</label>
                                <input type="text" id="deviceMAC" placeholder="z.B. 00:1B:44:11:3A:B7">
                            </div>
                            <div class="form-group">
                                <label for="deviceModel">Modell/Rack:</label>
                                <input type="text" id="deviceModel" placeholder="z.B. Cisco SG300-24">
                            </div>
                            <button type="submit" class="btn btn-primary">ğŸ–¨ï¸ GerÃ¤te-Label drucken</button>
                        </form>
                    </div>

                    <!-- Warning Label Form -->
                    <div class="form-panel" id="warningForm">
                        <h3>Warnungs-Label</h3>
                        <form class="label-form">
                            <div class="form-group">
                                <label for="warningText">Warnungstext:</label>
                                <input type="text" id="warningText" placeholder="z.B. HOCHSPANNUNG" required>
                            </div>
                            <div class="form-group">
                                <label for="warningVoltage">Spannung:</label>
                                <input type="text" id="warningVoltage" placeholder="z.B. 400V">
                            </div>
                            <div class="form-group">
                                <label for="warningIcon">Icon:</label>
                                <select id="warningIcon">
                                    <option value="âš ï¸">âš ï¸ Allgemeine Warnung</option>
                                    <option value="âš¡">âš¡ Hochspannung</option>
                                    <option value="ğŸ”¥">ğŸ”¥ Brandgefahr</option>
                                    <option value="â˜¢ï¸">â˜¢ï¸ Strahlungsgefahr</option>
                                    <option value="ğŸš«">ğŸš« Verboten</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-warning">ğŸ–¨ï¸ Warnungs-Label drucken</button>
                        </form>
                    </div>

                    <!-- Batch Label Form -->
                    <div class="form-panel" id="batchForm">
                        <h3>Batch-Labels (mehrere auf einmal)</h3>
                        <form class="label-form">
                            <div class="form-group">
                                <label for="batchTexts">Texte (einer pro Zeile):</label>
                                <textarea id="batchTexts" rows="8" placeholder="Server Rack A&#10;Server Rack B&#10;Grid Input&#10;Grid Output&#10;Modbus SM-1&#10;Network Switch&#10;Power Distribution&#10;Backup System" required></textarea>
                                <div class="form-help">
                                    ğŸ’¡ <strong>Tipp:</strong> Jeder Text wird als separates Label gedruckt, aber alle am StÃ¼ck mit dÃ¼nnen Trennstrichen.
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="batchFontSize">SchriftgrÃ¶ÃŸe:</label>
                                    <input type="range" id="batchFontSize" min="8" max="24" value="16">
                                    <span class="range-value" id="batchFontSizeValue">16px</span>
                                </div>
                                <div class="form-group">
                                    <label for="batchSeparator">Trenner-Breite:</label>
                                    <input type="range" id="batchSeparator" min="0" max="10" value="2">
                                    <span class="range-value" id="batchSeparatorValue">2px</span>
                                </div>
                            </div>
                            
                            <div class="batch-preview" id="batchPreview">
                                <div class="preview-header">
                                    <strong>ğŸ“‹ Batch-Vorschau:</strong>
                                </div>
                                <div class="preview-stats">
                                    <span class="stat">ğŸ“„ Labels: <strong id="batchCount">0</strong></span>
                                    <span class="stat">ğŸ“ Bandverbrauch: <strong id="tapeUsage">~0cm</strong></span>
                                </div>
                                <div class="preview-list" id="batchList"></div>
                            </div>
                            
                            <div class="batch-actions">
                                <button type="button" class="btn btn-secondary" id="loadPresetBtn">ğŸ“‹ Preset laden</button>
                                <button type="button" class="btn btn-secondary" id="clearBatchBtn">ğŸ—‘ï¸ Alle lÃ¶schen</button>
                                <button type="submit" class="btn btn-primary btn-large">ğŸ–¨ï¸ Batch drucken (kontinuierlich)</button>
                            </div>
                        </form>
                        
                        <!-- Preset Templates -->
                        <div class="preset-section">
                            <h4>ğŸ“‹ Schnell-Presets</h4>
                            <div class="preset-buttons">
                                <button type="button" class="preset-btn" data-preset="server-rack">ğŸ–¥ï¸ Server Racks</button>
                                <button type="button" class="preset-btn" data-preset="network">ğŸŒ Netzwerk</button>
                                <button type="button" class="preset-btn" data-preset="power">âš¡ Stromversorgung</button>
                                <button type="button" class="preset-btn" data-preset="office">ğŸ¢ BÃ¼ro</button>
                            </div>
                        </div>
                    </div>

                    <!-- Custom Label Builder -->
                    <div class="form-panel" id="customForm">
                        <h3>ğŸ¨ Custom Label Builder</h3>
                        
                        <!-- Template Selection -->
                        <div class="template-section">
                            <h4>ğŸ“‹ Template auswÃ¤hlen oder eigenes erstellen</h4>
                            <div class="template-grid">
                                <button type="button" class="template-card" data-template="blank">
                                    <div class="template-icon">ğŸ“„</div>
                                    <div class="template-name">Leeres Label</div>
                                </button>
                                <button type="button" class="template-card" data-template="two-line">
                                    <div class="template-icon">ğŸ“</div>
                                    <div class="template-name">Zwei Zeilen</div>
                                </button>
                                <button type="button" class="template-card" data-template="qr-code">
                                    <div class="template-icon">ğŸ“±</div>
                                    <div class="template-name">Mit QR-Code</div>
                                </button>
                                <button type="button" class="template-card" data-template="barcode">
                                    <div class="template-icon">ğŸ·ï¸</div>
                                    <div class="template-name">Mit Barcode</div>
                                </button>
                                <button type="button" class="template-card" data-template="icon-text">
                                    <div class="template-icon">ğŸ¢</div>
                                    <div class="template-name">Icon + Text</div>
                                </button>
                                <button type="button" class="template-card" data-template="table">
                                    <div class="template-icon">ğŸ“Š</div>
                                    <div class="template-name">Tabelle</div>
                                </button>
                            </div>
                        </div>

                        <!-- Label Designer -->
                        <div class="designer-section">
                            <h4>ğŸ› ï¸ Label Designer</h4>
                            
                            <div class="designer-workspace">
                                <!-- Canvas Preview -->
                                <div class="canvas-container">
                                    <h5>ğŸ“± Vorschau</h5>
                                    <div class="label-canvas" id="labelCanvas">
                                        <div class="canvas-placeholder">
                                            WÃ¤hlen Sie ein Template oder fÃ¼gen Sie Elemente hinzu
                                        </div>
                                    </div>
                                    <div class="canvas-info">
                                        GrÃ¶ÃŸe: <span id="canvasSize">Auto Ã— 50px</span>
                                    </div>
                                </div>

                                <!-- Element Controls -->
                                <div class="element-controls">
                                    <h5>â• Elemente hinzufÃ¼gen</h5>
                                    <div class="element-buttons">
                                        <button type="button" class="element-btn" data-element="text">ğŸ“ Text</button>
                                        <button type="button" class="element-btn" data-element="icon">ğŸ¯ Icon</button>
                                        <button type="button" class="element-btn" data-element="line">â– Linie</button>
                                        <button type="button" class="element-btn" data-element="box">â¬œ Box</button>
                                        <button type="button" class="element-btn" data-element="qr">ğŸ“± QR-Code</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Element Properties -->
                            <div class="properties-panel" id="propertiesPanel" style="display: none;">
                                <h5>âš™ï¸ Element bearbeiten</h5>
                                <div id="elementProperties">
                                    <!-- Dynamically populated -->
                                </div>
                            </div>

                            <!-- Label Elements List -->
                            <div class="elements-list">
                                <h5>ğŸ“‹ Label-Elemente</h5>
                                <div class="elements-container" id="elementsContainer">
                                    <div class="no-elements">Keine Elemente hinzugefÃ¼gt</div>
                                </div>
                            </div>
                        </div>

                        <!-- Global Label Settings -->
                        <div class="label-settings">
                            <h4>âš™ï¸ Label-Einstellungen</h4>
                            <div class="settings-grid">
                                <div class="form-group">
                                    <label for="labelWidth">Label-Breite:</label>
                                    <input type="range" id="labelWidth" min="100" max="500" value="200">
                                    <span class="range-value" id="labelWidthValue">200px</span>
                                </div>
                                <div class="form-group">
                                    <label for="labelHeight">Label-HÃ¶he:</label>
                                    <input type="range" id="labelHeight" min="30" max="100" value="50">
                                    <span class="range-value" id="labelHeightValue">50px</span>
                                </div>
                                <div class="form-group">
                                    <label for="labelMargin">Innenabstand:</label>
                                    <input type="range" id="labelMargin" min="0" max="20" value="5">
                                    <span class="range-value" id="labelMarginValue">5px</span>
                                </div>
                                <div class="form-group">
                                    <label for="labelBackground">Hintergrund:</label>
                                    <select id="labelBackground">
                                        <option value="white">âšª WeiÃŸ</option>
                                        <option value="black">âš« Schwarz</option>
                                        <option value="transparent">ğŸ”² Transparent</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Template Management -->
                        <div class="template-management">
                            <h4>ğŸ’¾ Template verwalten</h4>
                            <div class="management-controls">
                                <div class="form-group">
                                    <label for="templateName">Template-Name:</label>
                                    <input type="text" id="templateName" placeholder="z.B. Mein Custom Label">
                                </div>
                                <div class="management-buttons">
                                    <button type="button" class="btn btn-secondary" id="saveTemplateBtn">ğŸ’¾ Template speichern</button>
                                    <button type="button" class="btn btn-secondary" id="loadTemplateBtn">ğŸ“‚ Template laden</button>
                                    <button type="button" class="btn btn-warning" id="clearCanvasBtn">ğŸ—‘ï¸ Canvas leeren</button>
                                </div>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="custom-actions">
                            <button type="button" class="btn btn-primary btn-large" id="printCustomBtn">ğŸ–¨ï¸ Custom Label drucken</button>
                            <button type="button" class="btn btn-secondary" id="exportTemplateBtn">ğŸ“¤ Als Template exportieren</button>
                        </div>
                    </div>

                </section>

                <!-- Results -->
                <section class="results" id="results" style="display: none;">
                    <h3>Druckergebnis</h3>
                    <div class="result-content" id="resultContent">
                        <!-- Dynamisch gefÃ¼llt -->
                    </div>
                </section>

            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <p>Brother PT-E550W Label Generator PWA | 
                   <span id="printerStatus">Drucker-Status wird geladen...</span>
                </p>
                <button class="btn btn-secondary" id="installBtn" style="display: none;">ğŸ“± App installieren</button>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="spinner"></div>
        <p>Label wird gedruckt...</p>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>